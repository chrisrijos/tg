# Welcome to GraphiQL
#
# GraphiQL is an in-browser tool for writing, validating, and
# testing GraphQL queries.
#
# Type queries into this side of the screen, and you will see intelligent
# typeaheads aware of the current GraphQL type schema and live syntax and
# validation errors highlighted within the text.
#
# GraphQL queries typically start with a "{" character. Lines that starts
# with a # are ignored.
#
# An example GraphQL query might look like:
#
#     {
#       field(arg: "value") {
#         subField
#       }
#     }
#
# Keyboard shortcuts:
#
#       Run Query:  Ctrl-Enter (or press the play button above)
#
#   Auto Complete:  Ctrl-Space (or just start typing)
#

{
  allVehicles: tgVehicle {
    key
    active(value: true)
    fuelUsages @include(if: false) {
      qty
    }
    model {
      key
      desc
      make {
        key
      }
    }
    replacedBy {
      key
      active(value: false)
    }
  }
  testEntities: tgPersistentEntityWithProperties {
    key
    desc
    booleanProp(value: true)
  }
  anotherAllVehicles: tgVehicle {
    key
    active
  }
}

########### variables ############

query ($vehicleActiveValue: Boolean) {
  
  vehiclesWithStaticArgument: tgVehicle {
    key
    active(value: false)
  }
  
  vehiclesWithVariableArgument: tgVehicle {
    key
    active(value: $vehicleActiveValue)
  }
  
  vehicles: tgVehicle {
    key
    active
  }
  
}

Use the following variables for query running (or use completely empty variables): 
{
  "vehicleActiveValue": true
}

########### variables [END] ############

########### fragments (do not work yet) ############
query VehiclesWithFragment {
  tgVehicle {
    ...vehicleCommons
  }
}

fragment vehicleCommons on TgVehicle {
  key
  desc
  replacedBy {
    key
  }
}
########### fragments (do not work yet) [END] ############

########### mutations ############
mutation Misc($fourthVehicleInput: TgVehicleInput!) {
  
  addThirdVehicle: tgVehicle(input: {
    key: "CAR3"
    desc: "desc of CAR3"
    active: true
  }) {
    key
  }

  addFourthVehicle: tgVehicle(input: $fourthVehicleInput) {
    key
  }
  
  tgMachine(input: {
    key: "BC1487AC"
    desc: "desc of BC1487AC"
  }) {
    key
    enabled(value: true)
  }
}

query Vehicles {
  tgVehicle {
    key
    desc
    replacedBy {
      key
    }
    model {
      key
    }
  }
}

mutation AddVehicles($vehicleInput: TgVehicleInput!, $secVehicleInput: TgVehicleInput!) {
  first: tgVehicle(input: $vehicleInput) {
    key
    desc
    replacedBy {
      key
    }
  }
  secondDependingOnFirst: tgVehicle(input: $secVehicleInput) {
    key
    desc
    replacedBy {
      key
    }
  }
}

Use the following inputs for mutation running: 
{
  "vehicleInput": {
    "key": "CAR20",
    "desc": "desc of ...",
    "model": "321"
  },
  "secVehicleInput": {
    "key": "CAR21",
    "desc": "desc of ...",
    "model": "322",
    "replacedBy": "CAR20" -- recently created entity ('vehicleInput') can be used! mutations are guaranteed to be sequential
  }
}

########### mutations [END] ############