<link rel="import" href="/resources/polymer/polymer/polymer.html">

<dom-module id="tg-hierarchy-property-column">
    <script>
        (function () {
            Polymer({

                is: "tg-hierarchy-property-column",

                properties: {
                    property: String,
                    underlyingProperty: String,
                    tooltipProperty: String,
                    type: String,
                    width: Number,
                    minWidth: Number,
                    growFactor: Number,
                    columnTitle: String,
                    columnDesc: String,
                    customAction: Object
                },

                hostAttributes: {
                    hidden: true
                },

                ready: function () {
                    const tempSummary = [];
                    Array.prototype.forEach.call(Polymer.dom(this.$.summary_selection).getDistributedNodes(), function (item) {
                        tempSummary.push(item);
                    });
                    if (tempSummary.length > 0) {
                        this.summary = tempSummary;
                    }
                    this.customAction = Polymer.dom(this.$.action_selector).getDistributedNodes().length > 0 ? Polymer.dom(this.$.action_selector).getDistributedNodes()[0] : null;
                },

                /** Executes a custom action and returns true if the action was provided. Otherwise, simply returns false to indicate that there was no custom action to be executed. */
                runAction: function (entity) {
                    if (this.customAction) {
                        this.customAction.currentEntity = entity;
                        this.customAction._run();
                        return true;
                    }
                    return false;
                }
            });
        })();
    </script>
</dom-module>