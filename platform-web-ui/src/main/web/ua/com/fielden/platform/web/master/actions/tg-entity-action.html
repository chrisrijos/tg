<link rel="import" href="/resources/polymer/polymer/polymer.html">

<link rel="import" href="/resources/master/actions/tg-functional-action.html">
<link rel="import" href="/resources/master/actions/tg-functional-action-behavior.html">

<link rel="import" href="/resources/polymer/paper-button/paper-button.html">
<!-- <link rel="import" href="/resources/polymer/core-tooltip/core-tooltip.html"> -->

<dom-module id="tg-entity-action">
    <template>
    	<tg-functional-action id="functionalActionDom" entity-type="[[entityType]]" _process-executor-response="[[_processExecutorResponse]]" _process-executor-error="[[_processExecutorError]]">
    	</tg-functional-action>
        
        <!-- <core-tooltip position="bottom" tabIndex="-1" class="delayed" style="width:100%" disabled="{{!longDesc}}"> -->
            <paper-button id="actionButton" raised roll="button" on-tap="run" style="width:100%" disabled$="[[_disabled]]">[[shortDesc]]</paper-button>
            <!-- <span class="span-tooltip" tip>
                {{longDesc}}
            </span>
        </core-tooltip> -->
    </template>
</dom-module>

<script>
    Polymer({
    	is: 'tg-entity-action',
    	
    	behaviors: [ Polymer.TgBehaviors.TgFunctionalActionBehavior ],
    	
        /**
         * The core-ajax component for action executor.
         */
        _actionExecutor: function () {
            return this._functionalActionDom()._actionExecutor();
        },

        /**
         * The component for entity serialisation.
         */
        _serialiser: function () {
        	return this._functionalActionDom()._serialiser();
        },
        
        /**
         * The reflector component.
         */
        _reflector: function () {
        	return this._functionalActionDom()._reflector();
        },
        
        _functionalActionDom: function () {
        	return this.$.functionalActionDom;
        }
    });
</script>